<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Quiz Bahasa Prancis - Tour Guide</title>
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(120deg,#0f2027,#203a43,#2c5364);
  color: #fff;
  margin: 0;
  padding: 0;
}
.container {
  max-width: 900px;
  margin: auto;
  padding: 20px;
}
h1, h2 {
  text-align: center;
}
.card {
  background: rgba(255,255,255,0.1);
  padding: 15px;
  border-radius: 12px;
  margin-bottom: 20px;
}
input, button {
  padding: 10px;
  border-radius: 8px;
  border: none;
  margin: 5px;
}
input {
  width: 40%;
}
button {
  cursor: pointer;
  background: #00c6ff;
  color: #000;
  font-weight: bold;
}
button:hover {
  background: #00ffcc;
}
.option {
  background: #fff;
  color: #000;
  padding: 10px;
  border-radius: 8px;
  margin: 8px 0;
  cursor: pointer;
}
.option:hover {
  background: #00ffcc;
}
.correct {
  background: #4CAF50 !important;
  color: #fff;
}
.wrong {
  background: #f44336 !important;
  color: #fff;
}
.list-item {
  display: flex;
  justify-content: space-between;
  background: #fff;
  color: #000;
  padding: 8px;
  margin: 5px 0;
  border-radius: 8px;
}
.score {
  font-size: 18px;
  text-align: center;
}
</style>
</head>

<body>
<div class="container">
<h1>üá´üá∑ Quiz Bahasa Prancis ‚Äì Tour Guide</h1>

<!-- TAMBAH KOSAKATA -->
<div class="card">
<h2>Tambah Kosakata</h2>
<input id="frWord" placeholder="Bahasa Prancis">
<input id="idWord" placeholder="Arti Indonesia">
<button onclick="addVocab()">Tambah</button>
</div>

<!-- DAFTAR KOSAKATA -->
<div class="card">
<h2>Daftar Kosakata</h2>
<div id="vocabList"></div>
</div>

<!-- LATIHAN PENGUCAPAN -->
<div class="card">
<h2>Latihan Pengucapan</h2>
<button onclick="aiSpeak()">Dengarkan Kosakata</button>
<p id="currentWord"></p>
</div>

<!-- QUIZ KALIMAT -->
<div class="card">
<h2>Quiz Kalimat</h2>
<button onclick="generateQuiz()">Mulai Quiz</button>
<div id="quizBox"></div>
<p class="score">Skor: <span id="score">0</span></p>
</div>

</div>

<script>
let vocab = JSON.parse(localStorage.getItem("vocabFR")) || [];
let current = null;
let score = 0;

const sentenceTemplates = [
  "O√π est le ___ ?",
  "Je cherche ___",
  "Je voudrais visiter ___",
  "Comment aller √† ___ ?",
  "Pouvez-vous m'indiquer ___ ?"
];

function saveData(){
  localStorage.setItem("vocabFR", JSON.stringify(vocab));
}

function addVocab(){
  const fr = frWord.value.trim();
  const id = idWord.value.trim();
  if(!fr || !id) return alert("Isi semua kolom");

  vocab.push({fr, id});
  saveData();
  frWord.value = "";
  idWord.value = "";
  renderList();
}

function deleteVocab(i){
  if(confirm("Hapus kosakata ini?")){
    vocab.splice(i,1);
    saveData();
    renderList();
  }
}

function renderList(){
  vocabList.innerHTML = "";
  vocab.forEach((v,i)=>{
    vocabList.innerHTML += `
      <div class="list-item">
        <span>${v.fr} = ${v.id}</span>
        <button onclick="deleteVocab(${i})">‚ùå</button>
      </div>
    `;
  });
}

renderList();

/* ===== AUDIO KOSAKATA ===== */
function aiSpeak(){
  if(vocab.length === 0) return alert("Kosakata kosong");

  speechSynthesis.cancel();
  current = vocab[Math.floor(Math.random()*vocab.length)];
  currentWord.innerText = current.fr;

  let u = new SpeechSynthesisUtterance(current.fr);
  u.lang = "fr-FR";
  u.rate = 0.85;
  speechSynthesis.speak(u);
}

/* ===== QUIZ KALIMAT ===== */
function generateQuiz(){
  if(vocab.length < 3) return alert("Minimal 3 kosakata");

  quizBox.innerHTML = "";
  speechSynthesis.cancel();

  const correct = vocab[Math.floor(Math.random()*vocab.length)];
  current = correct;

  const template = sentenceTemplates[
    Math.floor(Math.random()*sentenceTemplates.length)
  ];

  const displaySentence = template.replace("___","_____");
  const spokenSentence = template.replace("___", correct.fr);

  quizBox.innerHTML = `
    <p><b>${displaySentence}</b></p>
  `;

  // üîä AI MEMBACA KALIMAT PRANCIS
  let utter = new SpeechSynthesisUtterance(spokenSentence);
  utter.lang = "fr-FR";
  utter.rate = 0.9;
  speechSynthesis.speak(utter);

  let options = [correct.fr];
  while(options.length < 4){
    let r = vocab[Math.floor(Math.random()*vocab.length)].fr;
    if(!options.includes(r)) options.push(r);
  }
  options.sort(()=>Math.random()-0.5);

  options.forEach(opt=>{
    let div = document.createElement("div");
    div.className = "option";
    div.innerText = opt;
    div.onclick = ()=>checkAnswer(div,opt);
    quizBox.appendChild(div);
  });
}

function checkAnswer(el, choice){
  document.querySelectorAll(".option").forEach(o=>o.onclick=null);

  if(choice === current.fr){
    el.classList.add("correct");
    score++;
  } else {
    el.classList.add("wrong");
  }
  document.getElementById("score").innerText = score;
}
</script>
</body>
</html>
